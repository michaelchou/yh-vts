<html>
<head>
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
<title>第三方快捷支付-限额管理</title>
<LINK REL=stylesheet HREF="../Terminal/Style/Default/Style.css" type="text/css" />
<script type="text/javascript">
	var indexID = 0;
	var indexImage =0;
	var isCheckAmt = false;
	// 初始化本次服务流程
	top.serviceCtrl.prepare4Entrance(document, window, function() {serverEntrance();});

	// 禁止页面其他非输入控件的元素获得焦点
	document.attachEvent("onclick", checkEvent);
	document.attachEvent("ondblclick", checkEvent);
	document.attachEvent("onfocusin", checkEvent);
	document.attachEvent("onkeypress", checkEvent);

	function checkEvent() {
		try {
			//如果光标停留在输入框上,更新last
			if(document.activeElement.tagName == "INPUT"){
				last = document.activeElement.id;
			}
			//如果点击的不是输入框,光标回到最后停留的标签中.否则切换到对应的输入框标签
			if(event.srcElement.id == "" || event.srcElement.type != "text" || event.srcElement.disabled){
				top.wins.checkEvent(event.srcElement, last);
			}else{
				top.wins.checkEvent(event.srcElement, event.srcElement.id);
			}
		}
		catch (e) {}
	}

	// 服务流程处理入口
	function serverEntrance() {
		top.pool.set("strNavigate2Url", window.location.pathname);
		if (typeof(top.YHAXIDCardReader) == "undefined")
		{
			onServiceFailed(top.langcur.oLimitManageFailed, top.TERMRETCODE_CARD_NOCARDDISPERSER, top.langcur.oNoIDCardReader);
		}else if(new top.CheckCard().cardSignStatus() != "true")
		{
			onServiceFailed(top.langcur.oLimitManageFailed, top.TERMRETCODE_CARD_NOCARDDISPERSER, new top.CheckCard().cardSignStatus());
		}else{
			if (top.cardreader.isCardPresent()) {
				if(top.pool.get("strCardType") != "1"){
					InsertCard();//提示插入本行借记卡
				}else{
					top.pool.set("strNavigate2Url", "");
					acceptIDCard();
				}
			}else{
				top.serviceCtrl.navigate2InsertCard();
			}
		}
	}
	
	function InsertCard() {
		onCardEjected = function() {
			top.serviceCtrl.startTipTick(top.iUserTimeout, oTakeInvalCardTick);
			// 播放提示音
			try {
				top.soundPlayer.playback("/Sound/TakeCardTip.mp3");
			} catch (e) {
			}
			top.wins.showMain("oLTakeInvalCardTip");
		}
		onCardTaken = function() {
			top.serviceCtrl.navigate2(top.pool.get("strNavigate2Url"));
		}
		onDeviceError_Idc = function() {
			if (top.cardreader.isCardPresent()) {
				top.YHAXCardReader.Capture();
			}
			onServiceFailed(top.langcur.oFxPurchaseFailed, top.TERMRETCODE_CARD_FAILED, top.langcur.oCardReaderError);
		}
		onCardCapturedTipEnd = function() {
			top.serviceCtrl.navigate2Quit();
		}
		onCardCaptured = function() {
			top.pool.set("printType","3");//选择打印的凭条类型
	        top.receiptprinter.printAndEject();
			top.wins.showInfoTip(top.langcur.oCardCapturedTip);
			top.serviceCtrl.startFlowCtrlTimeout(onCardCapturedTipEnd, 15 * 1000);
		}
		//退卡前屏蔽安全退出及返回Home的功能 
		oLSafeQuit.style.visibility = "hidden";
		oLGoHome.style.visibility = "hidden";
		top.cardreader.eject();
	}
	
	// 允许读取身份证
	function acceptIDCard() {
		window.operateCtrl.disableInput(true);
		top.serviceCtrl.stopUserTimeout();
		onDeviceError_ID = onCardInvalid_ID = function() {
			onServiceFailed(top.langcur.oLimitManageFailed, top.TERMRETCODE_ID_READFAILED, top.langcur.oIDReaderFailed);
		}
		onCardReaded = function() {
			//退身份证
			idCardEject();
		}
		onCardInserted_ID = function() {
			top.wins.showNewProcessingTip(top.langcur.oReadingIDCard);
		}
		onKey_Cancel = onKey_F98 = function() {
			top.idCardReader.cancelAccept();
			top.serviceCtrl.navigate2SecondMenu();
		}
		onTimeout_ID = onTimeout = function() {
			top.idCardReader.cancelAccept();
			top.serviceCtrl.navigate2Quit();
		}
		
		//插入身份证页面屏蔽安全退出及返回Home的功能
		oLSafeQuit.style.visibility = "hidden";
		oLGoHome.style.visibility = "hidden";
		
		window.operateCtrl.enableInput();
		top.serviceCtrl.startUserTimeout(onTimeout, top.iUserTimeout, oIdCardTick);
		top.idCardReader.accept();
		
		// 播放提示音
		try {top.soundPlayer.playback("/Sound/PutIDCard.mp3");} catch (e) {}
		top.serviceCtrl.changeNaviStatus('1');
		top.wins.showMain("oLIDCardTip");
	}
	
	// 提示取走二代身份证
	function idCardEject() {
		window.operateCtrl.disableInput(true);
		top.serviceCtrl.stopUserTimeout();
		top.pool.set("isPersonal","1");//人证合一
		onDeviceError_ID = onTimeout_ID = function() {
			onServiceFailed(top.langcur.oComSignFailed, top.TERMRETCODE_ID_EJECTFAILED, top.langcur.oEjectIDFailed);
		}
		onCardTaken_ID = function()
		{
		}
		//超时退出
		onTimeout = function() {
			top.idCardReader.IDCardEvents.clearAll();
			//进行联网核查流程
	        top.idCardReader.idCardTakenComplete();
		}
		top.serviceCtrl.startUserTimeout(onTimeout, 10, oIdCardTakeTick);
		window.operateCtrl.enableInput();
		top.idCardReader.eject();
		// 播放提示音
		try {
			top.soundPlayer.playback("/Sound/TakeIDCard.mp3");
		} catch (e) {
		}
		top.wins.showMain("oLIDCardTakeTip");
	}
	
	function onNetworkVirificationSuccessful() {
		top.serviceCtrl.stopUserTimeout();
		//开始影像文件上传交易  
		top.pool.set("strImageType", "IDType");//上传类型,后台会根据这个区分送到影像平台哪个接口
		top.pool.set("strImageFilePath", top.COLS_IDPHOTOS_FILEPATH);//上传的文件存储路劲
		top.wins.showNewProcessingTip(top.langcur.oSendImage);
		top.trans.sendImageFileAsync();	
    }
	
	//影像文件上传成功回调函数
	function onImageFileSuccessful(){
		var strBatchId = top.exchxmlasync.msgxmldomResp.getElementValue("strBatchId");//原交易批次号（影像平台专用、后面的交易都用这个）
		top.pool.set("strBatchId", strBatchId);
		if(indexID == 0)
		{
			//拍照
			TakePic();
		}
		else if(indexID == 1) {	
			top.wins.showNewProcessingTip("正在查询第三方快捷支付签约状态，请稍候..."); 
			top.trans.send901610Async();
		}
		else if(indexID == 2) {
			//上传业务办理单
			var htmlstr = infoToPic.innerHTML;
			top.pool.set("htmlstr",htmlstr);
			oSigConfirm.style.visibility = "hidden";//签名完影藏确定按钮
			infoToPic.style.visibility = "hidden";
			top.wins.showNewProcessingTip(top.langcur.sendBusiness);
			top.trans.sendBusinessApplicationAsync();
		}
	}
	
	//拍照
	function TakePic() {
		window.operateCtrl.disableInput(true);
		top.serviceCtrl.stopUserTimeout();
		top.serviceCtrl.changeNaviStatus('2');
		oLSafeQuit.style.visibility = "visible";
		oLGoHome.style.visibility = "visible";
		onTimeout = function()
		{
			top.cameras.display("Person","Destroy");//关闭摄像头
			top.serviceCtrl.navigate2Quit();
		}
		window.operateCtrl.enableInput();
		window.frames["ifreamPhoto"].CamerasLoad();//加载子页面摄像头相关方法
		top.wins.showMain("oLTakePicTip");
	}   
	
	function PhotoPrevStep()//TakePhoto页面过度方法
	{
		window.operateCtrl.disableInput(true);
		top.serviceCtrl.stopUserTimeout();
		top.serviceCtrl.navigate2SecondMenu();
		window.operateCtrl.enableInput();
	}
	
	function PhotoNextStep()//TakePhoto页面过度方法
	{
		window.operateCtrl.disableInput(true);
		top.serviceCtrl.stopUserTimeout();
		indexID++;
		top.pool.set("strImageType", "ZNGYType");//上传类型,后台会根据这个区分送到影像平台哪个接口
		top.pool.set("strImageFilePath", top.COLS_ZNGYPHOTOS_FILEPATH);//上传的文件存储路劲
		top.wins.showNewProcessingTip(top.langcur.oSendImage);
		top.trans.sendImageFileAsync();
		window.operateCtrl.enableInput();
	}

	//第三方快捷支付是否签约查询
	function onSignSuccessful(){
		var strSignStatus = top.pool.get("strSignStatus");
		if(strSignStatus.indexOf("KJZFYL") != -1) {
			top.pool.set("transLimitAmt","");
			top.pool.set("dayTransLimitAmt","");
			top.pool.set("monthLimith","");
			top.pool.set("signPayTypeFlag","");
			//卡类型查询 
			top.trans.send902105Async();
		}else{
			onServiceFailed(top.langcur.oLimitManageFailed, top.exchxmlasync.strTermRetCode, "用户尚未签约第三方快捷支付"); 
		}
	}
	
	//Ⅰ类卡查询成功
	function onService902105Successful() {
		var acctKind = top.pool.get("acctKind");
		
		if((acctKind == "" || acctKind == "1")) {//一类户页面显示
			top.pool.set("isFristPan","true");
		}else {//二类户页面显示 
			top.pool.set("isFristPan","false");
		}
		onInqTrfLmtSucceful();
	}
	
	//选择支付类型
	function ChooseFastPayType(){
		top.inputmethod.Close();
		
		top.serviceCtrl.stopUserTimeout();
		var t1 = document.getElementById("strFastPayType");
		top.pool.set("strPayType",t1.value);
		
		top.pool.set("transLimitAmt","");
		top.pool.set("dayTransLimitAmt","");
		top.pool.set("monthLimith","");
		
		if(top.pool.get("strPayType") == "008031-TLT007"){
			var obj=document.getElementById("strFastPayType");
			if(obj.options[obj.selectedIndex].text == "通联快捷支付"){
				top.pool.set("strType","0");
			}else if(obj.options[obj.selectedIndex].text == "万证通快捷支付"){
				top.pool.set("strType","1");
			}
		}
		
		top.wins.showNewProcessingTip("正在查询支付类型签约状态，请稍候...");
		top.trans.send901806Async();
	}
	
	//点击未选择情况下 
	function signFirstSelect(){
		top.pool.set("transLimitAmt","0.00");
		top.pool.set("dayTransLimitAmt","0.00");
		top.pool.set("monthLimith","0.00");
		top.pool.set("signPayTypeFlag", "");
		top.pool.set("signFirstSelect","true");
		onInqTrfLmtSucceful();
	}
	
	//未签约情况 
	function signFailed(){
		document.getElementById("strFastPayType").options[0].selected = true;
		top.pool.set("transLimitAmt","0.00");
		top.pool.set("dayTransLimitAmt","0.00");
		top.pool.set("monthLimith","0.00");
		top.pool.set("signFailed","true");
		onInqTrfLmtSucceful();
	}
	
	//第三方快捷支付-额度管理维护信息
	function onInqTrfLmtSucceful() {
		window.operateCtrl.disableInput(true);
		top.serviceCtrl.stopUserTimeout();
		warnTran.innerHTML ="";
		
		text_name1.innerHTML = top.pool.get("strIDName");
		text_pid1.innerHTML = top.pool.get("strIDCardNum");
		text_strPan1.innerHTML = top.pool.get("strPan");
		
		oneTrans.innerHTML="0.00";
		dayTrans.innerHTML="0.00";
		monthTrans.innerHTML="0.00";
		
		if(top.pool.get("signFirstSelect") == "true"){//点击未选择情况下 
			warnTran.innerHTML ="请选择支付类型";
			top.pool.set("signFirstSelect","");
		}else if(top.pool.get("signFailed") == "true"){//未签约情况 
			warnTran.innerHTML = "选择的支付类型尚未签约";
			top.pool.set("signFailed","");
		}
		 
		//页面金额转换
		top.pool.set("transLimitAmount",new top.StringCtrl(top.pool.get("transLimitAmt")/100).formatNumber(2));
		top.pool.set("dayTransLimitAmount",new top.StringCtrl(top.pool.get("dayTransLimitAmt")/100).formatNumber(2));
		top.pool.set("monthLimithAmount",new top.StringCtrl(top.pool.get("monthLimith")/100).formatNumber(2));
		
		//二类户回显额度超过默认限额，则置空由用户手动输入限额    
		if(top.pool.get("isFristPan") == "false"){
			
			if(top.pool.get("transLimitAmount") > 10000){
				document.getElementById("input_nummax1").value = "";
			}else{
				document.getElementById("input_daymax1").value = top.pool.get("dayTransLimitAmount");
			}
			if(top.pool.get("dayTransLimitAmount") > 10000){
				document.getElementById("input_daymax1").value = "";
			}else{
				document.getElementById("input_nummax1").value = top.pool.get("transLimitAmount");
			}
			if(top.pool.get("monthLimithAmount") > 100000){
				document.getElementById("input_monthmax1").value = "";
			}else{
				document.getElementById("input_monthmax1").value = top.pool.get("monthLimithAmount");
			}
		}else{
			document.getElementById("input_daymax1").value = top.pool.get("dayTransLimitAmount");
			document.getElementById("input_nummax1").value = top.pool.get("transLimitAmount");
			document.getElementById("input_monthmax1").value = top.pool.get("monthLimithAmount"); 
		}

		//一类卡和二类卡区分 
		if(top.pool.get("isFristPan") == "true" && top.pool.get("signPayTypeFlag") == "true"){
			if(top.pool.get("strPayType") == "008022-TQP012" || top.pool.get("strPayType") == "008023-AQP011" ){
				oneTrans.innerHTML="50000.00";
				dayTrans.innerHTML="50000.00";
				monthTrans.innerHTML="100000.00";
			}else if(top.pool.get("strPayType") == "008029-HFT007" || top.pool.get("strPayType") == "008030-JDT007" ||
					 top.pool.get("strPayType") == "008032-FFT007" || top.pool.get("strPayType") == "008033-SNT007" ||
					 top.pool.get("strPayType") == "008035-BDT007" || top.pool.get("strPayType") == "008036-UPQ011"){
				oneTrans.innerHTML="20000.00";
				dayTrans.innerHTML="20000.00";
				monthTrans.innerHTML="100000.00";
			}else if(top.pool.get("strPayType") == "008031-TLT007"){
				var obj=document.getElementById("strFastPayType");
				if(obj.options[obj.selectedIndex].text == "通联快捷支付"){
					oneTrans.innerHTML="20000.00";
					dayTrans.innerHTML="20000.00";
					monthTrans.innerHTML="100000.00";
				}else if(obj.options[obj.selectedIndex].text == "万证通快捷支付"){
					oneTrans.innerHTML="200000.00";
					dayTrans.innerHTML="200000.00";
					monthTrans.innerHTML="200000.00";
				}
			}
			top.pool.set("signPayTypeFlag","");
		}else if(top.pool.get("signPayTypeFlag") == "true" && top.pool.get("isFristPan") == "false"){
			oneTrans.innerHTML="10000.00";
			dayTrans.innerHTML="10000.00";
			monthTrans.innerHTML="100000.00";
			top.pool.set("signPayTypeFlag","");
		}
		
		onKey_F99 = function() {
			top.inputmethod.Close();
			if(top.pool.get("strPayType") == "" || top.pool.get("strPayType") == null){
				warnTran.innerHTML ="请选择支付类型";
				return;
			}
			if(input_nummax1.value == "" || input_daymax1.value == "" || input_monthmax1.value == ""){
				warnTran.innerHTML ="金额不能为空，请重新输入";
				return;
			}
			//金额是否合法
			//单笔金额判断
			if(!new top.StringCtrl(input_nummax1.value).isValidAmount() || input_nummax1.value < 0){
				warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
				input_nummax1.value = "";
				input_nummax1.focus();
				return;
			}
			//单日金额判断
			if(!new top.StringCtrl(input_daymax1.value).isValidAmount() || input_daymax1.value < 0){
				warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
				input_daymax1.value = "";
				input_daymax1.focus();	
				return;
			 }
			//单月金额判断
			if(!new top.StringCtrl(input_monthmax1.value).isValidAmount() || input_monthmax1.value < 0){
				warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
				input_monthmax1.value = "";
				input_monthmax1.focus();	
				return;
			 }
			
			//判断00位置是否是首位  
			if(((input_nummax1.value).indexOf("00"))==0){
				warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
				input_nummax1.value = "";
				input_nummax1.focus();
				return;
			}
		    if(((input_daymax1.value).indexOf("00"))==0){
				warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
				input_daymax1.value = "";
				input_daymax1.focus();
				return;
			}
		    if(((input_monthmax1.value).indexOf("00"))==0){
				warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
				input_monthmax1.value = "";
				input_monthmax1.focus();
				return;
			}
		    
		    //查询和修改的支付代号不同，需要转换一下 
		    if(top.pool.get("strPayType") == "008022-TQP012"){
				top.pool.set("strFastPayType","008022-TQP013");
				top.pool.set("strPayTypeName","财付通快捷支付");
			}else if(top.pool.get("strPayType") == "008023-AQP011"){
				top.pool.set("strFastPayType","008023-AQP012");
				top.pool.set("strPayTypeName","支付宝快捷支付");
			}else if(top.pool.get("strPayType") == "008029-HFT007"){
				top.pool.set("strFastPayType","008029-HFT008");
				top.pool.set("strPayTypeName","汇付天下快捷支付");
			}else if(top.pool.get("strPayType") == "008030-JDT007"){
				top.pool.set("strFastPayType","008030-JDT008");
				top.pool.set("strPayTypeName","京东快捷支付");
			}else if(top.pool.get("strPayType") == "008031-TLT007"){
				var obj=document.getElementById("strFastPayType");
				if(obj.options[obj.selectedIndex].text == "通联快捷支付"){
					top.pool.set("strType","0");
					top.pool.set("strPayTypeName","通联快捷支付");
				}else if(obj.options[obj.selectedIndex].text == "万证通快捷支付"){
					top.pool.set("strType","1");
					top.pool.set("strPayTypeName","万证通快捷支付");
				}
				top.pool.set("strFastPayType","008031-TLT008");
			}else if(top.pool.get("strPayType") == "008032-FFT007"){
				top.pool.set("strFastPayType","008032-FFT008");
				top.pool.set("strPayTypeName","付费通快捷支付");
			}else if(top.pool.get("strPayType") == "008033-SNT007"){
				top.pool.set("strFastPayType","008033-SNT008");
				top.pool.set("strPayTypeName","苏宁易付宝快捷支付");
			}else if(top.pool.get("strPayType") == "008035-BDT007"){
				top.pool.set("strFastPayType","008035-BDT008");
				top.pool.set("strPayTypeName","百付宝快捷支付"); 
			}else if(top.pool.get("strPayType") == "008036-UPQ011"){
				top.pool.set("strFastPayType","008036-UPQ012");
				top.pool.set("strPayTypeName","银联无卡快捷支付");
			}
			
			if(parseFloat(input_nummax1.value) > parseFloat(input_daymax1.value)){
				input_nummax1.value = "";
				warnTran.innerHTML ="单笔支付限额不能大于单日累计支付限额，请重新输入";
				return;
			}
			if(parseFloat(input_nummax1.value) > parseFloat(input_monthmax1.value)){
				input_nummax1.value = "";
				warnTran.innerHTML ="单笔支付限额不能大于月累计支付限额，请重新输入";
				return;
			}
			if(parseFloat(input_daymax1.value) > parseFloat(input_monthmax1.value)){
				input_daymax1.value = "";
				warnTran.innerHTML ="单日支付限额不能大于月累计支付限额，请重新输入";
				return;
			}
			
			top.pool.set("strTransLimitAmt",new top.StringCtrl(input_nummax1.value).formatNumber(2));
			top.pool.set("strDayTransLimitAmt",new top.StringCtrl(input_daymax1.value).formatNumber(2));
			top.pool.set("strMonthLimith",new top.StringCtrl(input_monthmax1.value).formatNumber(2));
			isCheckAmt = false;
			userSign();

		}
		input_nummax1.onkeypress = function() {
			warnTran.innerHTML = "&nbsp;";
		}
		input_daymax1.onkeypress = function() {
			warnTran.innerHTML = "&nbsp;";
		}
		input_monthmax1.onkeypress = function() {
			warnTran.innerHTML = "&nbsp;";
		}
		onTimeout = function()
		{
			isCheckAmt = false;
			top.inputmethod.Close();
			top.serviceCtrl.navigate2Quit();
		}
		isCheckAmt = true;
		window.operateCtrl.enableInput();
        top.serviceCtrl.startUserTimeout(onTimeout, top.iUserTimeout,oSignDetailTick);
		top.wins.showMain("oLSignDetailTip");
		top.serviceCtrl.changeNaviStatus('3');
	}
	
	//用户签名
	function userSign() {
		window.operateCtrl.disableInput(true);
		top.serviceCtrl.stopUserTimeout();
		oSigConfirm.style.visibility = "hidden";//隐藏确定按钮
		oSigAgain.style.visibility = "hidden";//隐藏重签按钮
		oSigFinger.style.visibility = "visible";
		oESign.style.visibility = "visible";
		top.pool.set("signPayTypeFlag","true");
		text_pid2.innerHTML = top.pool.get("strIDCardNum");
		text_name2.innerHTML = top.pool.get("strIDName");
		text_ethnic2.innerHTML = top.pool.get("strIDNation");
		text_address2.innerHTML = top.pool.get("strIDAddress");
		var signText = "";
		var signHtml = "<table><tr><td>&nbsp;&nbsp;签约功能:&nbsp;&nbsp;<span id='text_sign'></span></td></tr>";
		signHtml += "<tr><td>&nbsp;&nbsp;"+ top.pool.get("strPayTypeName")+":&nbsp;&nbsp;单笔支付限额"+top.pool.get("strTransLimitAmt")+"元&nbsp;&nbsp;单日累计支付限额"+top.pool.get("strDayTransLimitAmt")+"元&nbsp;&nbsp;月累计支付限额"+top.pool.get("strMonthLimith")+"元&nbsp;&nbsp;</td></tr>";
		signText += "第三方快捷支付-限额管理    ";
		signHtml += "</table>";
		signDetailMsg.innerHTML = signHtml;
		text_sign.innerHTML = signText;
		text_strPan.innerHTML = top.pool.get("strPan");
	
		text_date.innerHTML = new top.DateTimeCtrl().getYYYYMMDD2();
		text_time.innerHTML = new top.DateTimeCtrl().getHHmmSSWithSep();
		text_term.innerHTML = top.terminal.strTerminalNum;
		window.frames["ifreamSign"].SignLoad();//加载子页面签名相关方法
		window.operateCtrl.enableInput();
		top.serviceCtrl.startUserTimeout(window.frames['ifreamSign'].onTimeout, top.iUserTimeout,oSigFingerTick);
		Tip_UserSign.innerHTML = top.langcur.oUserSign;
		top.serviceCtrl.changeNaviStatus('4');
		top.wins.showMain("oLUserSignTip");
	}
	
	function SignPrevStep() {//ESign页面过度方法
		window.operateCtrl.disableInput(true);
		top.serviceCtrl.stopUserTimeout();
		oSigConfirm.style.visibility = "hidden";
		oSigAgain.style.visibility = "hidden";
		oSigFinger.style.visibility = "hidden";
		oESign.style.visibility = "hidden";
		onService902105Successful();
		window.operateCtrl.enableInput();
	}
	
	function SignNextStep() {//ESign页面过度方法 
		window.operateCtrl.disableInput(true);
		top.serviceCtrl.stopUserTimeout();
		oSigConfirm.style.visibility = "hidden";//签名完影藏确定按钮
		indexID++;
		top.pool.set("strImageType", "ZNGYType");//上传类型,后台会根据这个区分送到影像平台哪个接口
		top.pool.set("strImageFilePath", top.COLS_ZNGYPHOTOS_FILEPATH);//上传的文件存储路劲
		top.wins.showNewProcessingTip(top.langcur.oSendImage);
		top.trans.sendImageFileAsync();
		window.operateCtrl.enableInput();
	}
	
	//业务办理单上传成功
	function onSuccessful() {
		//身份证图片查询
		top.wins.showNewProcessingTip(top.langcur.oImageFileQuery);
		top.pool.set("strImageType","IDType");
		top.trans.sendImageFileQueryAsync();
	}
	
	//图片查询结果
	function onImageFileQuerySuccessful() {
		top.wins.stopProcessingTimeout();
		top.serviceCtrl.stopUserTimeout();
		if(indexImage == 0){
			top.pool.set("idPhotoBackUrl",top.pool.get("back"));//反
			top.pool.set("idPhotoUrl",top.pool.get("Front"));//正				
			//进行查询
			indexImage ++;
			top.wins.showNewProcessingTip(top.langcur.oImageFileQuery);
			top.pool.set("strImageType","ZNGYType");
			top.trans.sendImageFileQueryAsync();
		}else if(indexImage == 1){
			top.pool.set("scenePhotoUrl",top.pool.get("cameras"));//现场		
	        var Msg = new top.JSONCtrl();			
 			Msg.setJson("customerNum", "银行账号：" + top.pool.get("strPan"));
			Msg.setJson("onePayMax" , "单笔支付限额：" + top.pool.get("strTransLimitAmt") + "元");
			Msg.setJson("dayPayMax" , "单日累计支付限额：" + top.pool.get("strDayTransLimitAmt") + "元");
			Msg.setJson("monthPayMax" , "月累计支付限额：" + top.pool.get("strMonthLimith") + "元");
			Msg.setJson("payTypeName" , "支付类型：" + top.pool.get("strPayTypeName"));
			
 			top.pool.set("strCheckContent", Msg.jsonStr);
 			top.pool.set("strbusinessCode", "901807");
 			top.pool.set("strbusinessName", "第三方快捷支付-限额管理");	

			//进行审核
			top.wins.showNewProcessingTip(top.langcur.oCheckLoading);
			top.trans.send910301Async();   		
		}
	}

	//审核超时处理
	function onProcessingTimeout() {
		top.serviceCtrl.navigate2Quit();
	}
	
	//审核成功
	function onCheckLoadingSuccessful() {
		top.wins.stopProcessingTimeout();
		top.serviceCtrl.stopUserTimeout();
		//开始发起交易 
		startSignTrans();
	}

	//开始发起交易 
	function startSignTrans() {
		top.pool.set("transLimitAmt","");
		top.pool.set("dayTransLimitAmt","");
		top.pool.set("monthLimith","");
		top.pool.set("isFristPan","");
		top.pool.set("signPayTypeFlag","");
		//第三方快捷支付-限额管理
		top.wins.showNewProcessingTip("正在发起第三方快捷支付-限额管理，请稍候...");
		top.trans.send901807Async();
	}
	
	 function onServiceSuccessful()
	 {
	  top.serviceCtrl.changeNaviStatus('5');
	 	window.operateCtrl.disableInput(true);
	 	top.serviceCtrl.stopUserTimeout();
	 	if(top.receiptprinter.ReceiptPrinterStatus()!="true")
	 	{
	 		oPrintReceipt.style.visibility = "hidden";	
	 	}else
	 	{
	 		onKey_F99 = onKey_Enter = function()
	 		{
				top.pool.set("transName", "第三方快捷支付"); 
				top.pool.set("printType", "50");//选择打印的凭条类型	
				top.serviceCtrl.navigate2PrintReceipt();
	 		}
	 	}
	 	onKey_Cancel = onKey_F98 = function()
	 	{
	 		top.serviceCtrl.navigate2SecondMenu();
	 	}
	   
	 	onTimeout = function()
	 	{
	 		top.serviceCtrl.navigate2Quit();
	 	}
	 	//成功界面显示安全退出及返回Home的功能		
	 	oLSafeQuit.style.visibility = "visible";
	 	oLGoHome.style.visibility = "visible";
	 	top.serviceCtrl.startUserTimeout(onTimeout, top.iUserTimeout,oServiceSuccessTick);
	 	Tip_Title.innerHTML = "第三方快捷支付-限额管理交易成功！"; 
	 	window.operateCtrl.enableInput();
	 	top.wins.showMain("oLServiceSuccessTip");
	 }
	 
	function onServiceFailed(title, retcode, retdesc) {
		window.operateCtrl.disableInput(true);
		top.serviceCtrl.stopUserTimeout();
		
		onKey_Cancel = onKey_F98 = function() {
			top.serviceCtrl.navigate2SecondMenu();
		}
		oTitle.innerHTML = top.langcur.oLimitManageFailed;
		oFailedRetDesc.innerHTML = retdesc;
		
		//交易失败后，显示安全退出功能
		oLSafeQuit.style.visibility = "visible";
		oLGoHome.style.visibility = "visible";

		window.operateCtrl.enableInput();
		top.serviceCtrl.startUserTimeout(onKey_F98, top.iFailedTimeout, oServiceFailedTick);
		
		top.wins.showMain("oLServiceFailedTip");
	}
	 
	//支付宝、财付通限额
	function CheckPayLimit1(){
		if(parseFloat(input_nummax1.value) > 50000){
			input_nummax1.value = "";
			input_nummax1.focus();
			warnTran.innerHTML ="单笔支付限额不能大于50000元，请重新输入";
			return;
		}
		if(parseFloat(input_daymax1.value) > 50000){
			input_daymax1.value = "";
			input_daymax1.focus();
			warnTran.innerHTML ="单日支付限额不能大于50000元，请重新输入";
			return;
		}
		if(parseFloat(input_monthmax1.value) > 100000){
			input_monthmax1.value = "";
			input_monthmax1.focus();
			warnTran.innerHTML ="月支付限额不能大于100000元，请重新输入";
			return;
		}
		
	}
	
	//京东、苏宁易付宝、百付宝、通联、汇付天下、付费通、银联无卡快捷支付限额
	function CheckPayLimit2(){
		if(parseFloat(input_nummax1.value) > 20000){
			input_nummax1.value = "";
			input_nummax1.focus();
			warnTran.innerHTML ="单笔支付限额不能大于20000元，请重新输入";
			return;
		}
		if(parseFloat(input_daymax1.value) > 20000){
			input_daymax1.value = "";
			input_daymax1.focus();
			warnTran.innerHTML ="单日支付限额不能大于20000元，请重新输入";
			return;
		}
		if(parseFloat(input_monthmax1.value) > 100000){
			input_monthmax1.value = "";
			input_monthmax1.focus();
			warnTran.innerHTML ="月支付限额不能大于100000元，请重新输入";
			return;
		}
	}
	
	//万证通支付限额
	function CheckPayLimit3(){
		if(parseFloat(input_nummax1.value) > 200000){
			input_nummax1.value = "";
			input_nummax1.focus();
			warnTran.innerHTML ="单笔支付限额不能大于200000元，请重新输入";
			return;
		}
		if(parseFloat(input_daymax1.value) > 200000){
			input_daymax1.value = "";
			input_daymax1.focus();
			warnTran.innerHTML ="单日支付限额不能大于200000元，请重新输入";
			return;
		}
		if(parseFloat(input_monthmax1.value) > 200000){
			input_monthmax1.value = "";
			input_monthmax1.focus();
			warnTran.innerHTML ="月支付限额不能大于200000元，请重新输入";
			return;
		}
	}
	
	//二类账户限额判断 
	function CheckPayLimit4(){
		if(parseFloat(input_nummax1.value) > 10000){
			input_nummax1.value = "";
			input_nummax1.focus();
			warnTran.innerHTML ="单笔支付限额不能大于10000元，请重新输入";
			return;
		}
		if(parseFloat(input_daymax1.value) > 10000){
			input_daymax1.value = "";
			input_daymax1.focus();
			warnTran.innerHTML ="单日支付限额不能大于10000元，请重新输入";
			return;
		}
		if(parseFloat(input_monthmax1.value) > 100000){
			input_monthmax1.value = "";
			input_monthmax1.focus();
			warnTran.innerHTML ="月支付限额不能大于100000元，请重新输入";
			return;
		}
	} 
	
	 //用密码键盘输入时输入框校验
	 function CheckValue() {
		 if(isCheckAmt){
			 warnTran.innerHTML = "&nbsp;";
			 CheckPayValue1();
			 CheckPayValue2();
			 CheckPayValue3();
		 }
	}  
	
	//校验输入金额
	function CheckPayValue1() {
		
		if(input_nummax1.value !="" || input_nummax1.value!=null){
			input_checkAmount1();
		}
		 if(top.pool.get("isFristPan") == "true"){
			if(top.pool.get("strPayType") == "008022-TQP012" || top.pool.get("strPayType") == "008023-AQP011"){
				CheckPayLimit1();
			}else if(top.pool.get("strPayType") == "008029-HFT007" || top.pool.get("strPayType") == "008030-JDT007" ||
					 top.pool.get("strPayType") == "008032-FFT007" || top.pool.get("strPayType") == "008033-SNT007" ||
					 top.pool.get("strPayType") == "008035-BDT007" || top.pool.get("strPayType") == "008036-UPQ011"){
				CheckPayLimit2();
			}else if(top.pool.get("strPayType") == "008031-TLT007"){
				var obj=document.getElementById("strFastPayType");
				if(obj.options[obj.selectedIndex].text == "通联快捷支付"){
					CheckPayLimit2();
				}else if(obj.options[obj.selectedIndex].text == "万证通快捷支付"){
					CheckPayLimit3();
				}
			}
		}else if(top.pool.get("isFristPan") == "false"){
			CheckPayLimit4();
		} 
	}
	
	//单日累计金额校验
	function CheckPayValue2() {
		
		if(input_daymax1.value !="" || input_daymax1.value!=null){
			input_checkAmount2();
		}
		if(top.pool.get("isFristPan") == "true"){
			if(top.pool.get("strPayType") == "008022-TQP012" || top.pool.get("strPayType") == "008023-AQP011"){
				CheckPayLimit1();
			}else if(top.pool.get("strPayType") == "008029-HFT007" || top.pool.get("strPayType") == "008030-JDT007" ||
					 top.pool.get("strPayType") == "008032-FFT007" || top.pool.get("strPayType") == "008033-SNT007" ||
					 top.pool.get("strPayType") == "008035-BDT007" || top.pool.get("strPayType") == "008036-UPQ011"){
				CheckPayLimit2();
			}else if(top.pool.get("strPayType") == "008031-TLT007"){
				var obj=document.getElementById("strFastPayType");
				if(obj.options[obj.selectedIndex].text == "通联快捷支付"){
					CheckPayLimit2();
				}else if(obj.options[obj.selectedIndex].text == "万证通快捷支付"){
					CheckPayLimit3();
				}
			}
		}else if(top.pool.get("isFristPan") == "false"){
			CheckPayLimit4();
		} 
		
	}
	
	//月累计金额检验 
	function CheckPayValue3() {
	
	if(input_monthmax1.value !="" || input_monthmax1.value!=null){
		input_checkAmount3();
	}
	if(top.pool.get("isFristPan") == "true"){
		if(top.pool.get("strPayType") == "008022-TQP012" || top.pool.get("strPayType") == "008023-AQP011"){
			CheckPayLimit1();
		}else if(top.pool.get("strPayType") == "008029-HFT007" || top.pool.get("strPayType") == "008030-JDT007" ||
				 top.pool.get("strPayType") == "008032-FFT007" || top.pool.get("strPayType") == "008033-SNT007" ||
				 top.pool.get("strPayType") == "008035-BDT007" || top.pool.get("strPayType") == "008036-UPQ011"){
			CheckPayLimit2();
		}else if(top.pool.get("strPayType") == "008031-TLT007"){
			var obj=document.getElementById("strFastPayType");
			if(obj.options[obj.selectedIndex].text == "通联快捷支付"){
				CheckPayLimit2();
			}else if(obj.options[obj.selectedIndex].text == "万证通快捷支付"){
				CheckPayLimit3();
			}
		}
	}else if(top.pool.get("isFristPan") == "false"){
		CheckPayLimit4();
	} 
	
}
	
	function input_checkAmount1(){
		if((input_nummax1.value).indexOf(".") > 0){
			var str = (input_nummax1.value).substr(find_str((input_nummax1.value),".",1)+1,(input_nummax1.value).length);
			if (str.indexOf(".") > 0)
			{
				warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
				input_nummax1.value = "";
			}else{
				if(str.length == 0){
				}else if (str.length >2)
				{
					warnTran.innerHTML = "金额只支持两位小数";
					input_nummax1.value = input_nummax1.value.substr(0,input_nummax1.value.length-1);;
				}else if (!new top.StringCtrl(input_nummax1.value).isValidAmount()){
					warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
					input_nummax1.value = "";
				}
			}
		}else {
				if (!new top.StringCtrl(input_nummax1.value).isValidAmount())
				{
					warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
					input_nummax1.value = "";
				}
			}
		}
	
	function input_checkAmount2(){
		if((input_daymax1.value).indexOf(".") > 0){
			var str = (input_daymax1.value).substr(find_str((input_daymax1.value),".",1)+1,(input_daymax1.value).length);
			if (str.indexOf(".") > 0)
			{
				warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
				input_daymax1.value = "";
			}else{
				if(str.length == 0){
				}else if (str.length >2)
				{
					warnTran.innerHTML = "金额只支持两位小数";
					input_daymax1.value = input_daymax1.value.substr(0,input_daymax1.value.length-1);;
				}else if (!new top.StringCtrl(input_daymax1.value).isValidAmount()){
					warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
					input_daymax1.value = "";
				}
			}
		}else {
				if (!new top.StringCtrl(input_daymax1.value).isValidAmount())
				{
					warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
					input_daymax1.value = "";
				}
			}
		} 
	function input_checkAmount3(){
		if((input_monthmax1.value).indexOf(".") > 0){
			var str = (input_monthmax1.value).substr(find_str((input_monthmax1.value),".",1)+1,(input_monthmax1.value).length);
			if (str.indexOf(".") > 0)
			{
				warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
				input_monthmax1.value = "";
			}else{
				if(str.length == 0){
				}else if (str.length >2)
				{
					warnTran.innerHTML = "金额只支持两位小数";
					input_monthmax1.value = input_monthmax1.value.substr(0,input_monthmax1.value.length-1);;
				}else if (!new top.StringCtrl(input_monthmax1.value).isValidAmount()){
					warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
					input_monthmax1.value = "";
				}
			}
		}else {
				if (!new top.StringCtrl(input_monthmax1.value).isValidAmount())
				{
					warnTran.innerHTML = top.langcur.oPlsInputRightAmt;
					input_monthmax1.value = "";
				}
			}
		}   
	
	//根据特定字符查找所在位置
	function find_str(str,f_str,n){
		var arr_str;
		var tmp_str=0;
		var arr_str=str.split(f_str);
		if(arr_str.length<n){n=arr_str.length}
		for(i=0;i<n;i++){
		   tmp_str=arr_str[i].length+tmp_str;
		}
		return tmp_str+i-1;
	}
	
	function ShowKeyboard() {
		top.inputmethod.ShowDigit(900, 600);
	}
	
</script>
</head>
<body background="../Terminal/Style/Default/Img/Bg_Main_Menu2.jpg" oncontextmenu="return false" ondragstart="return false" onselectstart="return false" onselect="document.selection.empty()" oncopy="document.selection.empty()" onbeforecopy="return false" onmouseup="document.selection.empty()">
	<div class="divFlowPage" id="divFlowPage">
	   <table border="0" cellpadding="0" cellspacing="0">
		 <tr>
		   <td width="38"></td>                                 <td width="34" class="stepStatusIcon" id="node1"></td><td><div class="stepLine" id="nodeline11"></div></td>
		   <td><div class="stepLine" id="nodeline12"></div></td><td width="34" class="stepStatusIcon" id="node2"></td><td><div class="stepLine" id="nodeline21"></div></td>
		   <td><div class="stepLine" id="nodeline22"></div></td><td width="34" class="stepStatusIcon" id="node3"></td><td><div class="stepLine" id="nodeline31"></div></td>
		   <td><div class="stepLine" id="nodeline32"></div></td><td width="34" class="stepStatusIcon" id="node4"></td><td><div class="stepLine" id="nodeline41"></div></td>
		   <td><div class="stepLine" id="nodeline42"></div></td><td width="34" class="stepStatusIcon" id="node5"></td><td width="38"></td>
		 </tr>
		 <tr height="70">
		   <td class="font25" align="center" colspan="3">读取身份证</td>
		   <td class="font25" align="center" colspan="3">拍照认证</td>
		   <td class="font25" align="center" colspan="3">签约列表</td>
		   <td class="font25" align="center" colspan="3">签名确认</td>
		   <td class="font25" align="center" colspan="3">完成</td>
		 </tr>
	  </table>
    </div>
	
	<div id="oLIDCardTip" class="FULLSCR" style="visibility: hidden;">
		<div class="FULLSCR">
			<br><br><br><br><br><br>
			<span class="Tip_Tick" id="oIdCardTick"></span>
			<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
				<tr class="FirstLine" height="100">
					<td align="center"><br/><br/> 
						<span class="Tip_Title" id="oInsertID"></span><br/>
						<img src="../Image/ID_in.gif" width="870px" height="520px" />
					</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
				</tr>
			</table>
		</div>
		<span class="MENU98"><button onclick="javascript:onKey_F98()" class="return" name="oReturn"></button></span>
	</div>
	
	<div id="oLIDCardTakeTip" class="FULLSCR" style="visibility: hidden;">
		<div class="FULLSCR">
			<br><br><br><br><br><br>
			<span class="Tip_Tick" id="oIdCardTakeTick"></span>
			<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
				<tr class="FirstLine" height="100">
					<td align="center"><br/><br/>
						<span class="Tip_Title" id="oIDCardTake"></span><br/>
						<img src="../Image/id_out.gif" width="870px" height="520px" />
					</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
				</tr>
			</table>
		</div>
	</div>
	
 	<div id="oLTakePicTip" class="oLTakePicTip">
		<table width="100%" align="center" height="100%" border="0" cellpadding="0" cellspacing="0">
			<tr height="100%">
				<td align="center"><iframe id="ifreamPhoto" src="../Service/TakePhoto.html" width="100%" height="100%" frameborder="0px" marginheight="0px" marginwidth="0px" allowTransparency="true" scrolling="No"></iframe></td>
			</tr>
		</table>
	</div>

	<div id="oLUserSignTip" class="FULLSCR" style="visibility:hidden;">
    	<div class="FULLSCR">
    	<span class="Tip_Tick" id="oSigFingerTick"></span>
		<br><br><br><br><br><br><br><br>
		   <table width="75%" height="5%" border="0" cellpadding="0" cellspacing="0" align="center">
				<tr>
					<td height="20px" align="center" class="Error_Title" id="Tip_UserSign"></td>
				</tr>		
		   </table>
		   <div id="infoToPic">
			<table width="75%" height="20%" border="0" bgcolor="#FFFFFF" cellpadding="0" cellspacing="0" align="center">
			<tr><td height="20px"></td></tr>
			
			<tr>
			  <td width="3%"></td>
			  <td width="68%">
				<fieldset>
				<legend><span id="oUserTip1"></span></legend>
				<table>
				<tr>
					<td>&nbsp;&nbsp;<span id="oTextName"></span>&nbsp;&nbsp;<span id="text_name2"></span></td>
					<td>&nbsp;&nbsp;<span id="oTextEth"></span>&nbsp;&nbsp;<span id="text_ethnic2"></span></td>
				</tr>
				<tr>
					<td colspan="4">&nbsp;&nbsp;<span id="oTextPid"></span>&nbsp;&nbsp;<span id="text_pid2"></span></td>
				</tr>
				<tr>
					<td nowrap;colspan="4">&nbsp;&nbsp;<span id="oTextAddr"></span>&nbsp;&nbsp;<span id="text_address2"></span></td>
				</tr>
				</table>
				</fieldset>
			  </td>
			  <td width="3%"></td>
			</tr>
			
			<tr><td height="20px"></td></tr>
			
			<tr>
			  <td width="3%"></td>
			  <td width="68%">
			  <fieldset>
			  <legend><span id="oUserTip2"></span></legend>
			   <table>
				<tr>
				    <td>&nbsp;&nbsp;<span id="oPanNum"></span>&nbsp;&nbsp;<span id="text_strPan"></span></td>
				</tr>
			  </table>
			  <div id="signDetailMsg"></div>
			  <table>
				<tr>
				    <td nowrap>&nbsp;&nbsp;<span id="oTextDate"></span>&nbsp;&nbsp;<span id="text_date"></span></td>
					<td nowrap>&nbsp;&nbsp;<span id="oTextTime"></span>&nbsp;&nbsp;<span id="text_time"></span></td>
					<td nowrap>&nbsp;&nbsp;<span id="oTextTerm"></span>&nbsp;&nbsp;<span id="text_term"></span></td>
				</tr>
			  </table>
			  </fieldset>
			  </td>
			  <td width="3%"></td>
			</tr>
			<tr><td height="20px"></td></tr>
			</table>
			</div>
			<table width="75%" height="5%" border="0" cellpadding="0" cellspacing="0" align="center">
			<tr>
		        <td colspan="2" ><iframe id="ifreamSign" src="../Service/ESign.html" width="100%" height="250px" frameborder="0px" marginheight="0px" marginwidth="0px" allowTransparency="true" scrolling="No"></iframe></td>
		    </tr>
		</table>

	</div>
	     <span class="MMENU8" id="oSigFinger" style="top: 75%;"><button onmousedown="top.wins.doMouseDown(event.srcElement.name);setTimeout(window.frames['ifreamSign'].finger,100);" class="Menu_Right" name="Menu_Right" >指纹验证</button></span>
		 <span class="MMENU7" id="oESign"  style="top: 75%;"><button onmousedown="top.wins.doMouseDown(event.srcElement.name);setTimeout(window.frames['ifreamSign'].ESig,100);" class="Menu_RightE" name="Menu_RightE" >电子签名</button></span>
	     <span class="MMENUMiddle" id="oSigAgain" ><button onclick="javascript:window.frames['ifreamSign'].onKey_F7()" class="Menu_Right" name="oHome" id="oSign"></button></span>
	     <span class="MENU98" ><button onclick="javascript:window.frames['ifreamSign'].onKey_F98()" class="return" name="return"></button></span>
	     <span class="MENU99" id="oSigConfirm"><button onclick="javascript:window.frames['ifreamSign'].onKey_F99()" class="confirm" name="confirm"></button></span>
	</div>
	
	<div id="oLServiceSuccessTip" class="FULLSCR" style="visibility:hidden;">
   <div class="FULLSCR">
        <span class="Tip_Tick" id="oServiceSuccessTick"></span>
        <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
            <br/><br/><br/><br/><br/><br/><br/><br/>
            <tr class="FirstLine"><td align="center" colspan="2">
           		<img src="../Terminal/Style/Default/Img/success.png" width="97" height="97" /></br></br>
                <span class="Tip_Title" id="Tip_Title"></span>
              </td>
            </tr>
        </table>
  </div>
  <span class="MENU98" ><button onclick="javascript:onKey_F98()" class="return" name="oReturn"></button></span>
  <span class="MENU99" ><button onclick="javascript:onKey_F99()" class="Menu_Right" name="oPrintReceipt" id="oPrintReceipt"></button></span>
</div>

	 <div id="oLServiceFailedTip" class="FULLSCR" style="visibility: hidden;">
		<div class="FULLSCR">
			<span class="Tip_Tick" id="oServiceFailedTick"></span> <br />
			<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td align="center">
						<table cellpadding="10" cellspacing="1" class="Table_Ob" width="55%">
							<tr class="Table_Head">
								<td colspan="2" class="Error_Title" align="center" id="oTitle"></td>
							</tr>
							<tr class="Table_Record">
								<td id="oDescription"></td>
								<td><span id="oFailedRetDesc"></span></td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</div>
	</div>
	
	<div id="oLTakeInvalCardTip" class="FULLSCR" style="visibility: hidden;">
		<span class="Tip_Tick" id="oTakeInvalCardTick"></span>
		<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
			<br/><br/><br/><br/><br/><br/><br/><br/>
			<tr class="FirstLine">
				<td align="center"><span id="oReInsertDebCard" class="Tip_Title"></span><br />
				<br /> <img src="../Image/TakeCardTip.gif" width="870" height="520" />
				</td>
			</tr>
		</table>
	</div> 
	
	<div id="oLSignDetailTip" class="FULLSCR" style="visibility: hidden;">
	<div class="FULLSCR">
	<br><br><br><br> 
	<span class="Tip_Tick" id="oSignDetailTick"></span>
		<table width="70%" height="40%" border="0" cellpadding="0" cellspacing="0" align="center">
		<br/><br/><br/><br/>
		<tr rowspan=3><td height="20" align="center" colspan="2" class="Tip_Title">借记卡签约信息管理</td></tr>	
			<tr>
				<td>
					<fieldset width="100%" height="20%" style="border: 1px double white" align="center">
						<table cellpadding="0"  border=0 width="100%">
							<tr class="Table_Head">
								<td colspan="2"  align="center" >客户信息</td>
							</tr>
							<tr class="Table_Record">
								<td style="width:30%; height: 25px" align="center" class="Tip_Content">姓名:</td>
								<td align="center" class="Tip_Alarm"><span id="text_name1"></span></td>
							</tr>
							<tr class="Table_Record">
								<td style="width: 30%; height: 25px" align="center" class="Tip_Content">身份证号:</td>
								<td align="center" class="Tip_Alarm"><span id="text_pid1"></span></td>
							</tr>
							<tr class="Table_Record">
								<td style="width: 30%; height: 25px" align="center" class="Tip_Content">卡号:</td>
								<td align="center" class="Tip_Alarm"><span id="text_strPan1"></span></td>
							</tr>
						</table>
						<br/>
					</fieldset>
				</td>
				</tr>
				<tr>
					<td>
						<fieldset width="100%" height="40%" style="border: 1px double white" align="center">
							<table cellpadding="0" border=0 width="100%">
								<tr class="Table_Head">
									<td colspan="3"  align="center" >借记卡签约管理</td>
								</tr>
								<tr>
						        <td style="width: 50%; height: 25px" align="left" class="Tip_Content" name="交付类型">&nbsp;&nbsp;交付类型：</td>
									<td align="left" >
										<select id="strFastPayType" style="width:110%" class="input_short2" onchange="ChooseFastPayType()">
											<option value="select">--请选择--</option> 
											<option value="008022-TQP012">财付通快捷支付 </option> 
											<option value="008023-AQP011">支付宝快捷支付</option> 
											<option value="008029-HFT007">汇付天下快捷支付</option>
											<option value="008030-JDT007">京东快捷支付</option> 
											<option value="008031-TLT007">通联快捷支付</option> 
											<option value="008031-TLT007">万证通快捷支付</option> 
											<option value="008032-FFT007">付费通快捷支付</option> 
											<option value="008033-SNT007">苏宁易付宝快捷支付</option> 
											<option value="008035-BDT007">百付宝快捷支付</option>
											<option value="008036-UPQ011">银联无卡快捷支付</option> 
										</select>
									</td>
						       </tr>
									<tr>
										<td style="width: 50%; height: 25px" align="left"
											class="Tip_Content">&nbsp;&nbsp;单笔支付限额:</td>
										<td style="width: 30%; align="center"><input class="input_short2"
											name="input_nummax1" id="input_nummax1" maxlength="9" onclick="ShowKeyboard()" onkeyup="return CheckPayValue1()"/></td>
										<td style="width: 20%; align="left" class="Tip_Content">元</td>
									</tr>
									<tr>
										<td style="width: 50%; height: 25px" align="left"
											class="Tip_Content">&nbsp;&nbsp;单日累计支付限额:</td>
										<td style="width: 30%; align="center"><input class="input_short2"
											name="input_daymax1" id="input_daymax1" maxlength="9" onclick="ShowKeyboard()" onkeyup="return CheckPayValue2()"/></td>
										<td style="width: 20%; align="left" class="Tip_Content">元</td>
									</tr>
									<tr>
										<td style="width: 50%; height: 25px" align="left"
											class="Tip_Content">&nbsp;&nbsp;月累计支付限额:</td>
										<td style="width: 30%; align="center"><input class="input_short2"
											name="input_monthmax1" id="input_monthmax1" maxlength="9" onclick="ShowKeyboard()" onkeyup="return CheckPayValue3()"/></td>
										<td style="width: 20%; align="left" class="Tip_Content">元</td> 
									</tr>
									<tr>
										<td id="payTrans1" colspan="3" style=" height: 25px" align="left" class="Tip_Content" >&nbsp;&nbsp;单笔支付限额最高为 <span style="color:red" id="oneTrans"></span>元</td>
									</tr>
									<tr>
										<td id="payTrans2" colspan="3" style=" height: 25px" align="left" class="Tip_Content" >&nbsp;&nbsp;单日累计支付限额最高为 <span style="color:red" id="dayTrans"></span>元</td>
									</tr>
									<tr>
										<td id="payTrans3" colspan="3" style=" height: 25px" align="left" class="Tip_Content" >&nbsp;&nbsp;月累计支付限额最高为 <span style="color:red" id="monthTrans"></span>元</td>
									</tr>
									<tr>
										<td colspan="3" height ="25" align="center" class="Tip_Content"><span style="color:red" id="warnTran"></span></td>
									</tr>
								</table>
							<br/>
						</fieldset>
					</td>
				</tr>			
		</table>
	</div>
		<span class="MENU99" ><button onclick="javascript:onKey_F99()" class="confirm" name="oConfirm"></button></span>
	</div>
	
	<!--增加返回主页-->
	<div id="oLGoHome" class="GoHomeTip">
		<table width="100%" align="center" height="100%" border="0" cellpadding="0" cellspacing="0">
			 <tr height="100%">
			     <td align="center"><iframe src="../Service/GoHome.html" width="100%" height="100%" frameborder="0px" marginheight="0px" marginwidth="0px" allowTransparency="true" scrolling="No"></iframe></td>
			 </tr>
	    </table>
	</div>

	<!--增加滑动安全退出-->
	<div id="oLSafeQuit" class="SafeQuitTip">
		<table width="100%" align="center" height="100%" border="0" cellpadding="0" cellspacing="0">
			 <tr height="100%">
			     <td align="center"><iframe src="../Service/SafeQuit.html" width="100%" height="100%" frameborder="0px" marginheight="0px" marginwidth="0px" allowTransparency="true" scrolling="No"></iframe></td>
			 </tr>
	    </table>
	</div>
</body>
</html>